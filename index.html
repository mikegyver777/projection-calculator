<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Project Calculator</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
        .main-container { max-width: 1400px; margin: 0 auto; }
        .top-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 15px; }
        .top-header h1 { color: #1976D2; font-size: 32px; font-weight: 600; }
        .top-buttons { display: flex; gap: 10px; }
        .collection-week { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); margin-bottom: 30px; text-align: center; }
        .collection-week label { font-size: 18px; font-weight: 700; color: #1976D2; display: block; margin-bottom: 15px; }
        .collection-week input { font-size: 24px; font-weight: 600; text-align: center; padding: 15px 30px; border: 3px solid #1976D2; border-radius: 8px; width: 400px; max-width: 100%; background: white !important; -webkit-appearance: none; }
        .collection-week input:focus { outline: none; border-color: #42A5F5; box-shadow: 0 0 0 3px rgba(66,165,245,0.2); }
        .btn { padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; }
        .btn-primary { background: #4CAF50; color: white; }
        .btn-blue { background: #2196F3; color: white; }
        .btn-purple { background: #9C27B0; color: white; }
        .btn-danger { background: #EF5350; color: white; position: absolute; top: -10px; right: -10px; border-radius: 50%; width: 36px; height: 36px; }
        .btn-print-calc { background: #FF9800; color: white; padding: 8px 16px; font-size: 12px; }
        .summary-sheet { background: white; padding: 40px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); margin-bottom: 30px; }
        .summary-sheet h2 { color: #1976D2; font-size: 24px; margin-bottom: 20px; text-align: center; }
        .summary-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .summary-table th, .summary-table td { padding: 15px; text-align: left; border-bottom: 2px solid #e0e0e0; }
        .summary-table th { background: #f5f5f5; font-weight: 600; font-size: 12px; }
        .summary-totals { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 30px; }
        .summary-total-card { background: linear-gradient(135deg, #2196F3, #1976D2); color: white; padding: 25px; border-radius: 8px; text-align: center; }
        .summary-total-label { font-size: 12px; margin-bottom: 10px; }
        .summary-total-value { font-size: 32px; font-weight: 700; }
        .container { background: white; padding: 40px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); margin-bottom: 30px; position: relative; }
        .file-header { margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        .file-title { font-size: 24px; font-weight: 600; color: #1976D2; }
        .dashboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 40px; }
        .metric-card { background: linear-gradient(135deg, var(--c1), var(--c2)); padding: 20px; border-radius: 8px; color: white; }
        .metric-card.green { --c1: #4CAF50; --c2: #45a049; }
        .metric-card.purple { --c1: #AB47BC; --c2: #9C27B0; }
        .metric-card.blue { --c1: #42A5F5; --c2: #2196F3; }
        .metric-card.red { --c1: #EF5350; --c2: #E53935; }
        .metric-card.orange { --c1: #FF9800; --c2: #F57C00; }
        .metric-label { font-size: 11px; font-weight: 600; margin-bottom: 10px; }
        .metric-value { font-size: 28px; font-weight: 700; }
        .section { margin-bottom: 30px; border: 2px solid #e0e0e0; border-radius: 8px; overflow: hidden; }
        .section-header { padding: 15px; font-weight: 600; font-size: 14px; text-align: center; }
        .section-header.blue-header { background: #BBDEFB; color: #1565C0; }
        .section-header.green-header { background: #C8E6C9; color: #2E7D32; }
        .section-header.gray-header { background: #E0E0E0; color: #424242; }
        .section-header.yellow-header { background: #FFF9C4; color: #F57F17; }
        .section-content { padding: 25px; background: #fafafa; }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .form-grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        .form-group { display: flex; flex-direction: column; }
        label { font-size: 12px; font-weight: 600; margin-bottom: 8px; color: #555; }
        input[type="text"], input[type="number"], select { padding: 12px; border: 2px solid #e0e0e0; border-radius: 6px; font-size: 16px; -webkit-appearance: none; }
        input[type="text"]:focus, input[type="number"]:focus, select:focus { outline: none; border-color: #42A5F5; }
        input[type="number"] { color: #0066cc; font-weight: 500; }
        input[type="text"][inputmode="decimal"] { color: #0066cc; font-weight: 500; }
        select { cursor: pointer; }
        .totals-display { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 20px; }
        .total-box { text-align: center; padding: 20px; background: white; border-radius: 8px; border: 2px solid #e0e0e0; }
        .total-label { font-size: 11px; font-weight: 600; color: #666; margin-bottom: 10px; }
        .total-value { font-size: 24px; font-weight: 700; }
        .combined-boxes { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 25px; }
        .combined-payout { background: linear-gradient(135deg, #4CAF50, #45a049); color: white; padding: 25px; text-align: center; border-radius: 8px; }
        .combined-profit { background: linear-gradient(135deg, #AB47BC, #9C27B0); color: white; padding: 25px; text-align: center; border-radius: 8px; }
        .combined-label { font-size: 14px; font-weight: 600; margin-bottom: 12px; }
        .combined-value { font-size: 40px; font-weight: 700; }
        .print-view { display: none; }
        @media print {
            @page { margin: 0.3in; }
            body { margin: 0; padding: 0; }
            .no-print { display: none !important; }
            .print-view { display: block !important; }
            .print-summary { font-size: 9px; padding: 10px !important; }
            .print-summary h1 { font-size: 16px; margin-bottom: 8px !important; }
            .print-summary h2 { font-size: 13px; margin: 8px 0 !important; }
            .print-summary table { font-size: 8px; }
            .print-summary th, .print-summary td { padding: 6px !important; }
            .print-summary .summary-total-card { padding: 12px !important; font-size: 9px; }
            .print-summary .summary-total-card div:last-child { font-size: 18px !important; }
            .print-calc { font-size: 8px; padding: 10px !important; page-break-after: always; }
            .print-calc h1 { font-size: 14px; margin-bottom: 6px !important; }
            .print-calc p { font-size: 9px; margin: 5px 0 !important; }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="no-print">
            <div class="top-header">
                <h1>PROJECT CALCULATOR</h1>
                <div class="top-buttons">
                    <button class="btn btn-primary" onclick="app.addFile()">+ Add File</button>
                    <button class="btn btn-purple" onclick="app.saveWeek()">üíæ Save Week</button>
                    <button class="btn btn-blue" onclick="app.printSummary()">üñ®Ô∏è Print Summary</button>
                </div>
            </div>

            <div class="collection-week">
                <label for="collectionWeek">COLLECTION WEEK PERIOD</label>
                <input type="text" id="collectionWeek" placeholder="Enter dates (e.g., 10/1-10/6)" value="">
            </div>

            <div class="summary-sheet">
                <h2>All Files Summary</h2>
                <table class="summary-table">
                    <thead>
                        <tr>
                            <th>File #</th>
                            <th>Job Number</th>
                            <th>Customer Name</th>
                            <th>Total Payout</th>
                            <th>Total Profit</th>
                            <th>Profit %</th>
                        </tr>
                    </thead>
                    <tbody id="summaryBody"></tbody>
                </table>
                <div class="summary-totals">
                    <div class="summary-total-card">
                        <div class="summary-total-label">Combined Payout</div>
                        <div class="summary-total-value" id="grandPayout">$0.00</div>
                    </div>
                    <div class="summary-total-card">
                        <div class="summary-total-label">Combined Profit</div>
                        <div class="summary-total-value" id="grandProfit">$0.00</div>
                    </div>
                    <div class="summary-total-card">
                        <div class="summary-total-label">Overall Profit %</div>
                        <div class="summary-total-value" id="grandPercent">0%</div>
                    </div>
                </div>
            </div>

            <div id="filesContainer"></div>
        </div>
        
        <div id="printContent" class="print-view"></div>
    </div>

    <script>
var app={files:[],fileData:{},nextId:1,fmt:function(v){return '$'+parseFloat(v).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")},saveWeek:function(){var w=document.getElementById('collectionWeek');if(!w||!w.value||w.value.trim()===''){alert('Please enter collection week period in the field above!');w.focus();return}var d={weekPeriod:w.value,savedDate:new Date().toISOString(),files:[]};for(var i=0;i<this.files.length;i++){var f=this.files[i],fid='f'+f.id,obj={id:f.id,num:f.num};var flds=['job','name','con','net','lab','rep','cp','cfp','ep','msp','msd','rsp','rsd','ncp','ncd','abp','abd','ride','mon','fin','bank'];for(var j=0;j<flds.length;j++){var el=document.getElementById(fid+'_'+flds[j]);obj[flds[j]]=el?el.value:''}d.files.push(obj)}var json=JSON.stringify(d,null,2),blob=new Blob([json],{type:'application/json'}),url=URL.createObjectURL(blob),a=document.createElement('a');a.href=url;a.download='collection_week_'+w.value.replace(/[\/\s]/g,'-')+'.json';document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);alert('Collection week saved!')},printSummary:function(){var w=document.getElementById('collectionWeek').value||'Not Specified',totPayout=0,totProfit=0,totMoney=0,totNet=0,rows=[];for(var i=0;i<this.files.length;i++){var f=this.files[i],fid='f'+f.id,d=this.fileData[fid]||{},money=parseFloat(document.getElementById(fid+'_mon').value)||0,day=document.getElementById(fid+'_bank').value||'-';totPayout+=d.tot||0;totProfit+=d.prof||0;totNet+=d.net||0;totMoney+=money;rows.push({num:f.num,job:d.job||'-',name:d.name||'-',payout:d.tot||0,profit:d.prof||0,perc:d.perc||0,money:money,day:day})}var gPerc=totNet>0?(totProfit/totNet*100):0;var html='<div class="print-summary" style="padding:15px;font-family:Arial,sans-serif;"><h1 style="text-align:center;color:#1976D2;font-size:18px;margin-bottom:6px;">COLLECTION WEEK SUMMARY</h1><h2 style="text-align:center;margin:8px 0 15px 0;font-size:13px;color:#333;">Week Period: '+w+'</h2>';html+='<div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin:12px 0;"><div style="background:linear-gradient(135deg,#2196F3,#1976D2);color:white;padding:12px;border-radius:6px;text-align:center;"><div style="font-size:8px;margin-bottom:4px;">COMBINED PAYOUT</div><div style="font-size:18px;font-weight:bold;">'+this.fmt(totPayout)+'</div></div><div style="background:linear-gradient(135deg,#2196F3,#1976D2);color:white;padding:12px;border-radius:6px;text-align:center;"><div style="font-size:8px;margin-bottom:4px;">COMBINED PROFIT</div><div style="font-size:18px;font-weight:bold;">'+this.fmt(totProfit)+'</div></div><div style="background:linear-gradient(135deg,#2196F3,#1976D2);color:white;padding:12px;border-radius:6px;text-align:center;"><div style="font-size:8px;margin-bottom:4px;">PROFIT %</div><div style="font-size:18px;font-weight:bold;">'+gPerc.toFixed(2)+'%</div></div></div>';html+='<table style="width:100%;border-collapse:collapse;margin-top:12px;font-size:9px;"><thead><tr style="background:#f5f5f5;"><th style="padding:8px;text-align:left;border-bottom:2px solid #e0e0e0;font-weight:600;font-size:8px;color:#555;">FILE</th><th style="padding:8px;text-align:left;border-bottom:2px solid #e0e0e0;font-weight:600;font-size:8px;color:#555;">JOB #</th><th style="padding:8px;text-align:left;border-bottom:2px solid #e0e0e0;font-weight:600;font-size:8px;color:#555;">CUSTOMER</th><th style="padding:8px;text-align:left;border-bottom:2px solid #e0e0e0;font-weight:600;font-size:8px;color:#555;">PAYOUT</th><th style="padding:8px;text-align:left;border-bottom:2px solid #e0e0e0;font-weight:600;font-size:8px;color:#555;">PROFIT</th><th style="padding:8px;text-align:left;border-bottom:2px solid #e0e0e0;font-weight:600;font-size:8px;color:#555;">%</th><th style="padding:8px;text-align:left;border-bottom:2px solid #e0e0e0;font-weight:600;font-size:8px;color:#555;">RECEIVING</th><th style="padding:8px;text-align:left;border-bottom:2px solid #e0e0e0;font-weight:600;font-size:8px;color:#555;">DAY</th></tr></thead><tbody>';for(var i=0;i<rows.length;i++){var r=rows[i];html+='<tr><td style="padding:7px;border-bottom:1px solid #e0e0e0;">#'+r.num+'</td><td style="padding:7px;border-bottom:1px solid #e0e0e0;">'+r.job+'</td><td style="padding:7px;border-bottom:1px solid #e0e0e0;">'+r.name+'</td><td style="padding:7px;border-bottom:1px solid #e0e0e0;">'+this.fmt(r.payout)+'</td><td style="padding:7px;border-bottom:1px solid #e0e0e0;">'+this.fmt(r.profit)+'</td><td style="padding:7px;border-bottom:1px solid #e0e0e0;">'+r.perc.toFixed(2)+'%</td><td style="padding:7px;border-bottom:1px solid #e0e0e0;font-weight:bold;color:#2E7D32;">'+this.fmt(r.money)+'</td><td style="padding:7px;border-bottom:1px solid #e0e0e0;">'+r.day+'</td></tr>'}html+='</tbody></table>';html+='<div style="margin-top:15px;display:grid;grid-template-columns:repeat(3,1fr);gap:10px;"><div style="padding:12px;background:#4CAF50;color:white;border-radius:6px;text-align:center;"><div style="font-size:10px;font-weight:bold;margin-bottom:4px;">TOTAL PAYOUT</div><div style="font-size:22px;font-weight:bold;">'+this.fmt(totPayout)+'</div></div><div style="padding:12px;background:#AB47BC;color:white;border-radius:6px;text-align:center;"><div style="font-size:10px;font-weight:bold;margin-bottom:4px;">TOTAL PROFIT</div><div style="font-size:22px;font-weight:bold;">'+this.fmt(totProfit)+'</div></div><div style="padding:12px;background:#EF5350;color:white;border-radius:6px;text-align:center;"><div style="font-size:10px;font-weight:bold;margin-bottom:4px;">TOTAL RECEIVING</div><div style="font-size:22px;font-weight:bold;">'+this.fmt(totMoney)+'</div></div></div></div>';document.getElementById('printContent').innerHTML=html;window.print()},printCalculator:function(id){var fid='f'+id,d=this.fileData[fid]||{},w=document.getElementById('collectionWeek').value||'Not Specified',fileNum=this.files.find(function(f){return f.id===id}).num,html='<div class="print-calc" style="padding:15px;font-size:9px;"><h1 style="text-align:center;border-bottom:2px solid #1976D2;padding-bottom:8px;color:#1976D2;margin-bottom:10px;font-size:16px;">PROJECT CALCULATOR - FILE #'+fileNum+'</h1><div style="text-align:center;margin-bottom:12px;font-size:10px;"><strong>Week:</strong> '+w+' | <strong>Customer:</strong> '+(d.name||'N/A')+' | <strong>Job:</strong> '+(d.job||'N/A')+'</div>';html+='<div style="display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-bottom:12px;">';html+='<div style="background:#4CAF50;color:white;padding:8px;border-radius:4px;text-align:center;"><div style="font-size:7px;margin-bottom:3px;">PAYOUT</div><div style="font-size:14px;font-weight:bold;">'+this.fmt(d.tot||0)+'</div></div>';html+='<div style="background:#AB47BC;color:white;padding:8px;border-radius:4px;text-align:center;"><div style="font-size:7px;margin-bottom:3px;">PROFIT</div><div style="font-size:14px;font-weight:bold;">'+this.fmt(d.prof||0)+'</div></div>';html+='<div style="background:#42A5F5;color:white;padding:8px;border-radius:4px;text-align:center;"><div style="font-size:7px;margin-bottom:3px;">NET</div><div style="font-size:14px;font-weight:bold;">'+this.fmt(d.net||0)+'</div></div>';html+='<div style="background:#EF5350;color:white;padding:8px;border-radius:4px;text-align:center;"><div style="font-size:7px;margin-bottom:3px;">THIS WEEK</div><div style="font-size:14px;font-weight:bold;">'+this.fmt(parseFloat(document.getElementById(fid+'_mon').value)||0)+'</div></div>';html+='<div style="background:#FF9800;color:white;padding:8px;border-radius:4px;text-align:center;"><div style="font-size:7px;margin-bottom:3px;">BANK DROP</div><div style="font-size:11px;font-weight:bold;">'+(document.getElementById(fid+'_bank').value||'--')+'</div></div>';html+='</div>';html+='<table style="width:100%;border-collapse:collapse;font-size:8px;margin-bottom:10px;"><tr style="background:#BBDEFB;"><td colspan="2" style="padding:6px;font-weight:bold;text-align:center;border:1px solid #999;">CONTRACT & PAYMENT</td></tr><tr><td style="padding:4px;border:1px solid #ccc;width:50%;"><strong>Contract:</strong> '+this.fmt(parseFloat(document.getElementById(fid+'_con').value)||0)+'</td><td style="padding:4px;border:1px solid #ccc;"><strong>Net After Fees:</strong> '+this.fmt(parseFloat(document.getElementById(fid+'_net').value)||0)+'</td></tr><tr><td style="padding:4px;border:1px solid #ccc;" colspan="2"><strong>Labor & Materials:</strong> '+this.fmt(parseFloat(document.getElementById(fid+'_lab').value)||0)+'</td></tr></table>';html+='<table style="width:100%;border-collapse:collapse;font-size:8px;margin-bottom:10px;"><tr style="background:#C8E6C9;"><td colspan="2" style="padding:6px;font-weight:bold;text-align:center;border:1px solid #999;">TEAM PAYOUTS</td></tr><tr><td style="padding:4px;border:1px solid #ccc;"><strong>Reps:</strong> '+this.fmt(parseFloat(document.getElementById(fid+'_rep').value)||0)+'</td><td style="padding:4px;border:1px solid #ccc;"><strong>Canvasser:</strong> '+document.getElementById(fid+'_cr').textContent+'</td></tr><tr><td style="padding:4px;border:1px solid #ccc;"><strong>Confirmer:</strong> '+document.getElementById(fid+'_cfr').textContent+'</td><td style="padding:4px;border:1px solid #ccc;"><strong>Eliso:</strong> '+document.getElementById(fid+'_er').textContent+'</td></tr><tr><td style="padding:4px;border:1px solid #ccc;"><strong>Prod MS:</strong> '+document.getElementById(fid+'_msr').textContent+'</td><td style="padding:4px;border:1px solid #ccc;"><strong>Prod RS:</strong> '+document.getElementById(fid+'_rsr').textContent+'</td></tr><tr><td style="padding:4px;border:1px solid #ccc;"><strong>Prod NC:</strong> '+document.getElementById(fid+'_ncr').textContent+'</td><td style="padding:4px;border:1px solid #ccc;"><strong>Prod ABE:</strong> '+document.getElementById(fid+'_abr').textContent+'</td></tr><tr><td style="padding:4px;border:1px solid #ccc;" colspan="2"><strong>Ride Along:</strong> '+this.fmt(parseFloat(document.getElementById(fid+'_ride').value)||0)+'</td></tr></table>';html+='<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px;"><div style="background:#4CAF50;color:white;padding:12px;border-radius:6px;text-align:center;"><div style="font-size:9px;font-weight:bold;margin-bottom:5px;">TOTAL PAYOUT</div><div style="font-size:20px;font-weight:bold;">'+this.fmt(d.tot||0)+'</div></div><div style="background:#AB47BC;color:white;padding:12px;border-radius:6px;text-align:center;"><div style="font-size:9px;font-weight:bold;margin-bottom:5px;">TOTAL PROFIT</div><div style="font-size:20px;font-weight:bold;">'+this.fmt(d.prof||0)+'</div></div></div></div>';document.getElementById('printContent').innerHTML=html;window.print()},deleteFile:function(id){if(this.files.length<=1){alert('Cannot delete last file');return}if(confirm('Delete this file?')){var el=document.getElementById('f'+id);if(el)el.remove();this.files=this.files.filter(function(f){return f.id!==id});delete this.fileData['f'+id];this.updateSummary()}},addFile:function(){var id=this.nextId++,fid='f'+id,num=this.files.length+1,delBtn=this.files.length>0?'<button class="btn btn-danger" onclick="app.deleteFile('+id+')">√ó</button>':'';var h='<div class="container" id="'+fid+'">'+delBtn+'<div class="file-header"><div class="file-title">File #'+num+'</div><button class="btn btn-print-calc" onclick="app.printCalculator('+id+')">üñ®Ô∏è</button></div><div class="dashboard"><div class="metric-card green"><div class="metric-label">Total Payout</div><div class="metric-value" id="'+fid+'_d1">--</div></div><div class="metric-card purple"><div class="metric-label">Profit</div><div class="metric-value" id="'+fid+'_d2">--</div></div><div class="metric-card blue"><div class="metric-label">Net After Fees</div><div class="metric-value" id="'+fid+'_d3">--</div></div><div class="metric-card red"><div class="metric-label">Money This Week</div><div class="metric-value" id="'+fid+'_d4">--</div></div><div class="metric-card orange"><div class="metric-label">Bank Drop</div><div class="metric-value" id="'+fid+'_d5">--</div></div></div><div class="section"><div class="section-header blue-header">File Information</div><div class="section-content"><div class="form-grid-2"><div class="form-group"><label>Job Number</label><input type="text" id="'+fid+'_job" oninput="app.calc(\''+fid+'\')"></div><div class="form-group"><label>Customer Name</label><input type="text" id="'+fid+'_name" oninput="app.calc(\''+fid+'\')"></div></div></div></div><div class="section"><div class="section-header blue-header">Contract & Payment</div><div class="section-content"><div class="form-grid"><div class="form-group"><label>Contract Amount</label><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_con" oninput="app.calc(\''+fid+'\')"></div><div class="form-group"><label>Net After Fees</label><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_net" oninput="app.calc(\''+fid+'\')"></div><div class="form-group"><label>Labor & Materials</label><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_lab" oninput="app.calc(\''+fid+'\')"></div></div></div></div><div class="section"><div class="section-header green-header">Team Payouts</div><div class="section-content"><div class="form-grid"><div class="form-group"><label>Reps Payout</label><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_rep" oninput="app.calc(\''+fid+'\')"></div><div class="form-group"><label>Canvasser %</label><div style="display:flex;gap:10px;align-items:center"><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_cp" oninput="app.calc(\''+fid+'\')" style="width:80px" value="2"><span>=</span><div id="'+fid+'_cr" style="flex:1;padding:8px;background:#f5f5f5;border:2px solid #e0e0e0;border-radius:6px;text-align:right">$0.00</div></div></div><div class="form-group"><label>Confirmer %</label><div style="display:flex;gap:10px;align-items:center"><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_cfp" oninput="app.calc(\''+fid+'\')" style="width:80px" value="0.25"><span>=</span><div id="'+fid+'_cfr" style="flex:1;padding:8px;background:#f5f5f5;border:2px solid #e0e0e0;border-radius:6px;text-align:right">$0.00</div></div></div><div class="form-group"><label>Eliso %</label><div style="display:flex;gap:10px;align-items:center"><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_ep" oninput="app.calc(\''+fid+'\')" style="width:80px" value="1.5"><span>=</span><div id="'+fid+'_er" style="flex:1;padding:8px;background:#f5f5f5;border:2px solid #e0e0e0;border-radius:6px;text-align:right">$0.00</div></div></div><div class="form-group"><label>Prod MS</label><div style="display:flex;gap:10px;align-items:center"><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_msp" oninput="app.calc(\''+fid+'\')" style="width:70px" value="0.25"><span>% of</span><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_msd" oninput="app.calc(\''+fid+'\')" style="width:100px"><span>=</span><div id="'+fid+'_msr" style="flex:1;padding:8px;background:#f5f5f5;border:2px solid #e0e0e0;border-radius:6px;text-align:right">$0.00</div></div></div><div class="form-group"><label>Prod RS</label><div style="display:flex;gap:10px;align-items:center"><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_rsp" oninput="app.calc(\''+fid+'\')" style="width:70px" value="0.25"><span>% of</span><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_rsd" oninput="app.calc(\''+fid+'\')" style="width:100px"><span>=</span><div id="'+fid+'_rsr" style="flex:1;padding:8px;background:#f5f5f5;border:2px solid #e0e0e0;border-radius:6px;text-align:right">$0.00</div></div></div><div class="form-group"><label>Prod NC</label><div style="display:flex;gap:10px;align-items:center"><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_ncp" oninput="app.calc(\''+fid+'\')" style="width:70px" value="0.25"><span>% of</span><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_ncd" oninput="app.calc(\''+fid+'\')" style="width:100px"><span>=</span><div id="'+fid+'_ncr" style="flex:1;padding:8px;background:#f5f5f5;border:2px solid #e0e0e0;border-radius:6px;text-align:right">$0.00</div></div></div><div class="form-group"><label>Prod ABE</label><div style="display:flex;gap:10px;align-items:center"><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_abp" oninput="app.calc(\''+fid+'\')" style="width:70px" value="0.25"><span>% of</span><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_abd" oninput="app.calc(\''+fid+'\')" style="width:100px"><span>=</span><div id="'+fid+'_abr" style="flex:1;padding:8px;background:#f5f5f5;border:2px solid #e0e0e0;border-radius:6px;text-align:right">$0.00</div></div></div><div class="form-group"><label>Ride Along</label><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_ride" oninput="app.calc(\''+fid+'\')"></div></div></div></div><div class="section"><div class="section-header gray-header">Financial Summary</div><div class="section-content"><div class="totals-display"><div class="total-box"><div class="total-label">Total Payout</div><div class="total-value" id="'+fid+'_t1">--</div></div><div class="total-box"><div class="total-label">Profit</div><div class="total-value" id="'+fid+'_t2">--</div></div><div class="total-box"><div class="total-label">Money This Week</div><input type="text" inputmode="decimal" pattern="[0-9]*" id="'+fid+'_mon" oninput="app.calc(\''+fid+'\')" style="max-width:200px;text-align:center;font-size:20px;font-weight:700;padding:10px"></div></div></div></div><div class="section"><div class="section-header yellow-header">Finance & Bank Info</div><div class="section-content"><div class="form-grid-2"><div class="form-group"><label>Finance Source</label><select id="'+fid+'_fin"><option value="">Select</option><option value="Finance">Finance</option><option value="Cash">Cash</option><option value="Finance and Cash">Both</option></select></div><div class="form-group"><label>Bank Drop Day</label><select id="'+fid+'_bank" oninput="app.calc(\''+fid+'\')"><option value="">Select Day</option><option value="Monday">Monday</option><option value="Tuesday">Tuesday</option><option value="Wednesday">Wednesday</option><option value="Thursday">Thursday</option><option value="Friday">Friday</option><option value="Saturday">Saturday</option></select></div></div><div class="combined-boxes"><div class="combined-payout"><div class="combined-label">Total Payout</div><div class="combined-value" id="'+fid+'_t3">--</div></div><div class="combined-profit"><div class="combined-label">Total Profit</div><div class="combined-value" id="'+fid+'_t4">--</div></div></div><div style="margin-top:25px;text-align:center;"><button class="btn btn-primary" onclick="app.addFile()">+ Add File</button></div></div></div></div>';document.getElementById('filesContainer').insertAdjacentHTML('beforeend',h);this.files.push({id:id,num:num});this.updateSummary();setTimeout(function(){app.calc(fid)},50)},calc:function(id){var con=parseFloat(document.getElementById(id+'_con').value)||0,net=parseFloat(document.getElementById(id+'_net').value)||0,lab=parseFloat(document.getElementById(id+'_lab').value)||0,rep=parseFloat(document.getElementById(id+'_rep').value)||0,cp=parseFloat(document.getElementById(id+'_cp').value)||0,cv=net*(cp/100);document.getElementById(id+'_cr').textContent=this.fmt(cv);var cfp=parseFloat(document.getElementById(id+'_cfp').value)||0,cf=con*(cfp/100);document.getElementById(id+'_cfr').textContent=this.fmt(cf);var ep=parseFloat(document.getElementById(id+'_ep').value)||0,ev=con*(ep/100);document.getElementById(id+'_er').textContent=this.fmt(ev);var msp=parseFloat(document.getElementById(id+'_msp').value)||0,msd=parseFloat(document.getElementById(id+'_msd').value)||0,ms=msd*(msp/100);document.getElementById(id+'_msr').textContent=this.fmt(ms);var rsp=parseFloat(document.getElementById(id+'_rsp').value)||0,rsd=parseFloat(document.getElementById(id+'_rsd').value)||0,rs=rsd*(rsp/100);document.getElementById(id+'_rsr').textContent=this.fmt(rs);var ncp=parseFloat(document.getElementById(id+'_ncp').value)||0,ncd=parseFloat(document.getElementById(id+'_ncd').value)||0,nc=ncd*(ncp/100);document.getElementById(id+'_ncr').textContent=this.fmt(nc);var abp=parseFloat(document.getElementById(id+'_abp').value)||0,abd=parseFloat(document.getElementById(id+'_abd').value)||0,ab=abd*(abp/100);document.getElementById(id+'_abr').textContent=this.fmt(ab);var ride=parseFloat(document.getElementById(id+'_ride').value)||0,mon=parseFloat(document.getElementById(id+'_mon').value)||0,bank=document.getElementById(id+'_bank').value||'--',tot=lab+rep+cv+cf+ev+ms+rs+nc+ab+ride,prof=net-tot,perc=net>0?(prof/net*100):0;document.getElementById(id+'_t1').textContent=this.fmt(tot);document.getElementById(id+'_t2').textContent=this.fmt(prof);document.getElementById(id+'_t3').textContent=this.fmt(tot);document.getElementById(id+'_t4').textContent=this.fmt(prof);document.getElementById(id+'_d1').textContent=this.fmt(tot);document.getElementById(id+'_d2').textContent=this.fmt(prof);document.getElementById(id+'_d3').textContent=this.fmt(net);document.getElementById(id+'_d4').textContent=this.fmt(mon);document.getElementById(id+'_d5').textContent=bank;this.fileData[id]={job:document.getElementById(id+'_job').value,name:document.getElementById(id+'_name').value,tot:tot,prof:prof,perc:perc,net:net};this.updateSummary()},updateSummary:function(){var gTot=0,gProf=0,gNet=0,html='';for(var i=0;i<this.files.length;i++){var f=this.files[i],d=this.fileData['f'+f.id]||{job:'',name:'',tot:0,prof:0,perc:0,net:0};gTot+=d.tot;gProf+=d.prof;gNet+=d.net;html+='<tr><td>File #'+f.num+'</td><td>'+(d.job||'-')+'</td><td>'+(d.name||'-')+'</td><td>'+this.fmt(d.tot)+'</td><td>'+this.fmt(d.prof)+'</td><td>'+d.perc.toFixed(2)+'%</td></tr>'}document.getElementById('summaryBody').innerHTML=html;document.getElementById('grandPayout').textContent=this.fmt(gTot);document.getElementById('grandProfit').textContent=this.fmt(gProf);var gPerc=gNet>0?(gProf/gNet*100):0;document.getElementById('grandPercent').textContent=gPerc.toFixed(2)+'%'}};app.addFile();
    </script>
</body>
</html>
